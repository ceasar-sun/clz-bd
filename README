####################################################
# Clonezilla-BD : Deploy CDH Haddop automativally via CLonezilla 
#
# Description: To deploy CDH Haddop cluster automatically
# Author:
#	Ceasar Sun <ceasar_at_nchc_org_tw>
#
#	Free Software Lab, NCHC, Taiwan
#	License: GPL
####################################################

Goal:
* Deploy Hadoop environment automatically via Clonezilla postrun function. especially for massive deployment needs
* User only have to prepare a native Linux OS Cloneizlla image. 

Require:
* Clonezilla : SE or Live edition
* Machines' mac adddress list (option): If SE assign IP by mac address, list can auto-generate form dhcpd.conf. If not, user have to prepare macs list of all machines
* Saved Linux image (via Clonezilla)

Support:
* Linux OS version: Debian, Ubuntut, LinuxMint
* Hadoop version : CDH (Cloudera's Distribution Hadoop)

How to use :

Step 1: Prepare
1.1. Make sure a saved image is ready and download Clonezilla-BD module:
$ git clone https://github.com/cesaar-sun/clz-bd.git
1.2. Check and prepare necessary config files and CDH package, network connection is required. At last step, it would install itself as a postrun module in Clonezilla SE environment if available (root privilege required )
$ cd clz-bd; ./deploy-bd.sh --parpare

Step 2: Set postrun and deploy
2.1. Run dcs command to setup ocs restore procedure , check postrun parameter "-o1" in expert mode
2.2. Make clients machine to run ocs restore procedure , then CDH environment would be deploy during ocs-postrun stage

Step 3: Test Hadoop environment
3.1. Until all clients machine reboot then runnig native OS, the necessary services would be started in master node automatically.
3.2. Usually, master node booting would take time to wait all slave nodes on line (stay in rc.local service) for starting relative services
3.3. Login to master node and run Hadoop test code via 'hduser' account :
$ hadoop jar /opt/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.5.0-cdh5.3.1.jar pi 4 100000

